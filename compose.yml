services:
    fossflow:
      image: munchkin1983/mammals:dev
      pull_policy: if_not_present
      expose:
        - "8080"
      environment:
        - NODE_ENV=production
        - ENABLE_SERVER_STORAGE=${ENABLE_SERVER_STORAGE:-true}
        - STORAGE_PATH=/data/diagrams
        - ENABLE_GIT_BACKUP=${ENABLE_GIT_BACKUP:-false}
      volumes:
        - diagrams-data:/data/diagrams
      networks:
        - proxy-net

networks:
  proxy-net:
    external: true

volumes:
  diagrams-data: